package com.revature.web;

import java.util.Arrays;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.revature.dao.TodoDao;
import com.revature.dao.TodoDaoImpl;

public class Dispatcher {
	
	private static TodoDao todoDao = new TodoDaoImpl();

	// Restrict instantiation
	private Dispatcher() {
	}
	
	// The purpose of this class, this method, is to determine WHAT ACTION your application
	// is supposed to take, given the provided HTTP Method and URI
	public static Object dispatch(HttpServletRequest request, HttpServletResponse response) {
		if (isGet(request)) {
			if (request.getRequestURI().startsWith("/FrontControllerExample/api/reimbursements")) {
				// How do you handle the URI /FrontControllerExample/api/reimbursements/2
				String[] path = request.getRequestURI().split("/");
				System.out.println(Arrays.toString(path));
				if (path.length == 3) {
					return todoDao.getAllTodos();	
				} else if (path.length == 4) {
					int id = Integer.valueOf(path[3]);
					// return todoDao.findTodoById(id)
				}
			}
		} else if (isPost(request)) {
			
		}
		return null;
	}
	
	
	/**
	 * Helper Methods
	 */
	private static boolean isGet(HttpServletRequest request) {
		return request.getMethod().equals("GET");
	}
	
	private static boolean isPost(HttpServletRequest request) {
		return request.getMethod().equals("POST");
	}
}
